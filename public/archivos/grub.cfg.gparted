#
set prefix=/multiboot/gparted-live-0.23.0-1-amd64//EFI/boot/
set default="0"
if loadfont $prefix/unicode.pf2; then
  set gfxmode=auto
  insmod efi_gop
  insmod efi_uga
  insmod gfxterm
  terminal_output gfxterm
fi
set timeout="30"
set hidden_timeout_quiet=false

if background_image $prefix/Gsplash.png; then
  set color_normal=black/black
  set color_highlight=magenta/black
else
  set color_normal=cyan/blue
  set color_highlight=white/blue
fi

# Since no network setting in the squashfs image, therefore if ip=, the network is disabled.

menuentry "GParted Live (Default settings)"{
  search --set -f /multiboot/gparted-live-0.23.0-1-amd64/live/vmlinuz
  linux /multiboot/gparted-live-0.23.0-1-amd64/live/vmlinuz boot=live live-media-path=/multiboot/gparted-live-0.23.0-1-amd64/live union=overlay username=user config components quiet noswap noeject  ip= net.ifnames=0  nosplash 
  initrd /multiboot/gparted-live-0.23.0-1-amd64/live/initrd.img
}
menuentry "GParted Live (Default settings, KMS)"{
  search --set -f /multiboot/gparted-live-0.23.0-1-amd64/live/vmlinuz
  linux /multiboot/gparted-live-0.23.0-1-amd64/live/vmlinuz boot=live live-media-path=/multiboot/gparted-live-0.23.0-1-amd64/live union=overlay username=user config components quiet noswap noeject vga=791 ip= net.ifnames=0  nosplash
  initrd /multiboot/gparted-live-0.23.0-1-amd64/live/initrd.img
}

menuentry "GParted Live (To RAM, boot media can be removed later)"{
  search --set -f /multiboot/gparted-live-0.23.0-1-amd64/live/vmlinuz
  linux /multiboot/gparted-live-0.23.0-1-amd64/live/vmlinuz boot=live live-media-path=/multiboot/gparted-live-0.23.0-1-amd64/live union=overlay username=user config components quiet noswap noeject  toram=filesystem.squashfs ip= net.ifnames=0  nosplash 
  initrd /multiboot/gparted-live-0.23.0-1-amd64/live/initrd.img
}

menuentry "GParted Live Safe graphic settings (vga=normal)"{
  search --set -f /multiboot/gparted-live-0.23.0-1-amd64/live/vmlinuz
  linux /multiboot/gparted-live-0.23.0-1-amd64/live/vmlinuz boot=live live-media-path=/multiboot/gparted-live-0.23.0-1-amd64/live union=overlay username=user config components quiet noswap noeject ip= net.ifnames=0 nomodeset vga=normal nosplash
  initrd /multiboot/gparted-live-0.23.0-1-amd64/live/initrd.img
}

menuentry "GParted Live (Failsafe mode)"{
  search --set -f /multiboot/gparted-live-0.23.0-1-amd64/live/vmlinuz
  linux /multiboot/gparted-live-0.23.0-1-amd64/live/vmlinuz boot=live live-media-path=/multiboot/gparted-live-0.23.0-1-amd64/live union=overlay username=user config components quiet noswap noeject acpi=off irqpoll noapic noapm nodma nomce nolapic nosmp ip= net.ifnames=0 nomodeset vga=normal nosplash
  initrd /multiboot/gparted-live-0.23.0-1-amd64/live/initrd.img
}

#menuentry "memtest"{
#  search --set -f /multiboot/gparted-live-0.23.0-1-amd64/live/memtest
#  linux16 /multiboot/gparted-live-0.23.0-1-amd64/live/memtest
#}

